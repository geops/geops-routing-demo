(this["webpackJsonpgeops-routing-demo"]=this["webpackJsonpgeops-routing-demo"]||[]).push([[0],{557:function(e,t,n){e.exports=n(967)},767:function(e,t,n){},769:function(e,t,n){},958:function(e,t,n){},959:function(e,t,n){},966:function(e,t,n){},967:function(e,t,n){"use strict";n.r(t);n(558),n(567),n(757);var r=n(0),a=n.n(r),o=n(25),c=n(29),i=n.n(c),u=n(498),l=n(1022),s=n(37),d=n(175),p=n(121),f=n(249),m=n(250),h=n(122),g=n(275),b=n(497),v=n(263),O=n(82),y=n(500),S=n(253),E=n(272),j=n(66),k=n.n(j),R=n(130),w=n(132),C=n(273),x=n(463),N=n(464),M=n(184),P=n(1029),F=n(72),T=n(40),I=n(1011),_=n(1007),L=n(1026),A=n(1024),H=n(1019),V=n(1016),G=n(1023),z=n(1012),D=n(281),U=n(1021),B=n(1020),J=n(1030),W=n(1018),K=n(480),q=n.n(K),Z=n(481),$=n.n(Z),X=n(280),Y=n(264),Q=n.n(Y),ee=function(e){return{type:"SET_CENTER",center:e}},te=function(e){return{type:"SET_CURRENT_STOPS",currentStops:e}},ne=function(e){return{type:"SET_CURRENT_STOPS_GEOJSON",currentStopsGeoJSON:e}},re=function(e){return{type:"SET_CURRENT_MOT",currentMot:e}},ae=function(e,t){return{type:"SHOW_NOTIFICATION",notificationMessage:e,notificationType:t}},oe=function(e){return{type:"SET_IS_FIELD_FOCUSED",isFieldFocused:e}},ce=function(e){return{type:"SET_SHOW_LOADING_BAR",showLoadingBar:e}},ie=function(e){return{type:"SET_SELECTED_ROUTES",selectedRoutes:e}},ue=function(e){return{type:"SET_IS_ROUTE_INFO_OPEN",isRouteInfoOpen:e}},le=function(e){return{type:"SET_TRACKS",tracks:e}},se=(n(767),["rail","bus","foot"]),de=["tram","coach","subway","gondola","funicular","ferry","car"],pe=[].concat(se,de),fe=["foot","car"],me=n(474),he=n.n(me),ge=n(472),be=n.n(ge),ve=n(473),Oe=n.n(ve),ye=n(8),Se=function(e){var t=null,n=e.charAt(0).toUpperCase()+e.slice(1);switch(e){case"rail":t=a.a.createElement(be.a,null);break;case"foot":t=a.a.createElement(Oe.a,null);break;default:t=a.a.createElement(he.a,null)}return a.a.createElement("span",{title:n},t)},Ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return Object(ye.n)(e,"EPSG:3857","EPSG:4326").map((function(e){return e.toFixed(t)}))},je=function(e){return Object(ye.n)(e,"EPSG:4326","EPSG:3857")},ke=n(1008),Re=n(968),we=n(1010),Ce=n(1009),xe=n(339),Ne=n.n(xe),Me=n(70),Pe=(n(769),function(e,t,n,r){var a=[];return n?a.push("".concat(n).concat(e||t?":":"").concat(e?" ".concat(e):"").concat(t?" ".concat(t):"")):a.push("".concat(e?"".concat(e):"").concat(e&&t?" ":"").concat(t?"".concat(t):"")),r&&a.push("ifopt: ".concat(r)),a.filter((function(e){return""!==e})).join(", ")});function Fe(e){var t=e.currentSearchResults,n=e.processClickedResultHandler,c=Object(o.d)((function(e){return e.MapReducer.olMap})),i=Object(r.useState)(null),u=Object(T.a)(i,2),l=u[0],s=u[1],d=Object(r.useRef)(),p=Object(r.useCallback)((function(){var e;d.current&&(e=c.getTarget().getBoundingClientRect().bottom-d.current.getBoundingClientRect().top-35);e>=0&&s(e)}),[c]);return Object(r.useEffect)((function(){var e=c.on("change:size",(function(){return p()}));return function(){Object(Me.b)(e)}}),[]),Object(r.useEffect)((function(){p()}),[p,t]),0===t.length?null:a.a.createElement(_.a,{square:!0,elevation:3,ref:d},a.a.createElement(ke.a,{component:"nav",className:"rd-result-list","aria-label":"search results",style:{maxHeight:l,overflowY:"scroll",paddingBottom:0,paddingTop:0}},t.map((function(e,t){return 0!==t?a.a.createElement(Re.a,{onClick:function(){n(e)},button:!0,key:Q()()},a.a.createElement(Ce.a,null,a.a.createElement(Ne.a,null)),a.a.createElement(we.a,{primary:e.properties.name,secondary:Pe(e.properties.id,e.properties.code,e.properties.country_code,e.properties.ifopt)})):a.a.createElement(Re.a,{onClick:function(){return n(e)},button:!0,selected:!0,key:"searchResult-".concat(e.properties.name)},a.a.createElement(Ce.a,null,a.a.createElement(Ne.a,null)),a.a.createElement(we.a,{primary:e.properties.name,secondary:Pe(e.properties.id,e.properties.code,e.properties.country_code,e.properties.ifopt)}))}))))}Fe.defaultProps={currentSearchResults:[]};var Te=Fe,Ie=n(27),_e=n(1027),Le=n(1017),Ae=n(478),He=n.n(Ae),Ve=n(477),Ge=n.n(Ve),ze=n(340),De=n.n(ze),Ue=n(479),Be=n.n(Ue),Je=n(476),We=n.n(Je),Ke=Object(I.a)((function(e){return{wrapper:Object(Ie.a)({width:"12%",padding:"0 10px 4px 10px"},e.breakpoints.down("xs"),{padding:"0 5px 4px 5px"})}})),qe=Object(I.a)((function(){return{select:{paddingRight:"17px !important"},icon:{width:"0.8em",height:"0.8em"}}}));var Ze=function(e){var t=e.index,n=e.disabled,c=Ke(),i=qe(),u=Object(o.c)(),l=Object(o.d)((function(e){return e.MapReducer.tracks})),d=Object(o.d)((function(e){return e.MapReducer.currentMot})),p=Object(o.d)((function(e){return e.MapReducer.currentStopsGeoJSON})),f=Object(r.useMemo)((function(){return l[t]}),[t,l]),m=Object(r.useMemo)((function(){return p[t]&&p[t].properties&&p[t].properties.platforms&&p[t].properties.platforms[d]?[""].concat(Object(s.a)(p[t].properties.platforms[d].sort((function(e,t){return parseInt(e,10)-parseInt(t,10)})))):[]}),[t,d,p]);return a.a.createElement(z.a,{className:c.wrapper},a.a.createElement(G.a,{classes:i,renderValue:function(e){return""===e?"-":e},labelId:"rd-track-select-label",value:f||"",displayEmpty:!0,disabled:n||!m.length,onChange:function(e){var n=Object(s.a)(l),r=e.target.value;n[t]=r,u(le(n))}},m.map((function(e){return a.a.createElement(V.a,{value:e,key:"track-".concat(e)},""===e?"-":e)}))))},$e=n(1),Xe=n.n($e),Ye=Xe.a.arrayOf(Xe.a.number.isRequired).isRequired,Qe=Xe.a.shape({propTypeCoordinates:Ye,type:Xe.a.string.isRequired}),et=Xe.a.shape({geometry:Qe,properties:Xe.a.shape({id:Xe.a.oneOfType([Xe.a.string.isRequired,Xe.a.string.isRequired]),type:Xe.a.string.isRequired}),type:Xe.a.string.isRequired}),tt=Xe.a.shape({features:Xe.a.shape({0:Xe.a.oneOfType([et,Ye]),1:Xe.a.oneOfType([et,Ye])}),type:Xe.a.string.isRequired}),nt=(Xe.a.shape({0:tt,1:tt}),Xe.a.arrayOf(Xe.a.oneOfType([Xe.a.string.isRequired,Ye])),Object(I.a)((function(e){return{gridContainer:Object(Ie.a)({width:"100%",padding:"0px 0px 0px 20px",boxSizing:"unset"},e.breakpoints.down("xs"),{padding:"0px 0px 0px 5px"}),button:{color:"black","& svg":{height:"20px",width:"20px"}},fieldWrapper:Object(Ie.a)({maxWidth:"58%",marginLeft:"5px"},e.breakpoints.down("sm"),{maxWidth:"50%"}),buttonWrapper:{maxWidth:"26px"}}})));function rt(e){var t,n=nt(),c=Object(o.c)(),i=e.index,u=e.addNewSearchFieldHandler,l=e.currentStops,s=e.removeSearchFieldHandler,d=e.searchStopsHandler,p=e.singleStop,f=e.processHighlightedResultSelectHandler,m=e.onFieldFocusHandler,h=e.onPanViaClick,g=e.inputReference,b=null,v=10,O="",y=null,S=Object(r.useMemo)((function(){return"string"===typeof p&&""!==p}),[p]),E=""===l[i]||l.length>2&&""===l[i+1];return 0===i?(b=a.a.createElement(J.a,{title:"Pan to the feature"},a.a.createElement(Le.a,{onClick:function(){return h(p,i)},className:n.button,"aria-label":"Pan to the feature",size:"small"},a.a.createElement(We.a,{fontSize:"small",color:"primary"}))),O="Start",y=a.a.createElement(W.a,{item:!0,xs:1,className:n.buttonWrapper},a.a.createElement(J.a,{title:"Add Hop"},a.a.createElement(Le.a,{onClick:function(){return u(l,i+1)},disabled:E,className:n.button,"aria-label":"Add Hop",size:"small"},a.a.createElement(De.a,{fontSize:"small"}))))):i===l.length-1?(b=a.a.createElement(J.a,{title:"Pan to the feature"},a.a.createElement(Le.a,{onClick:function(){return h(p,i)},className:n.button,"aria-label":"Pan to the feature",size:"small"},a.a.createElement(Ge.a,{color:"primary"}))),O="End"):(b=a.a.createElement(J.a,{title:"Pan to the feature"},a.a.createElement(Le.a,{onClick:function(){return h(p,i)},className:n.button,"aria-label":"Pan to the feature",size:"small"},a.a.createElement(He.a,{fontSize:"small",color:"primary"}))),v=9,O="Hop",y=a.a.createElement(a.a.Fragment,null,a.a.createElement(W.a,{item:!0,xs:1,className:n.buttonWrapper},a.a.createElement(J.a,{title:"Add Hop"},a.a.createElement(Le.a,{disabled:E,onClick:function(){return u(l,i+1)},className:n.button,"aria-label":"addHop",size:"small"},a.a.createElement(De.a,{fontSize:"small"})))),a.a.createElement(W.a,{item:!0,xs:1,className:n.buttonWrapper},a.a.createElement(J.a,{title:"Remove Hop"},a.a.createElement(Le.a,{onClick:function(){return s(i)},className:n.button,"aria-label":"removeHop",size:"small"},a.a.createElement(Be.a,{fontSize:"small"})))))),a.a.createElement(W.a,{container:!0,spacing:1,className:n.gridContainer,alignItems:"flex-end"},a.a.createElement(W.a,{item:!0,xs:1},b),a.a.createElement(W.a,{item:!0,xs:v,className:n.fieldWrapper},a.a.createElement(_e.a,{style:{width:"100%"},inputRef:g,label:O,color:"primary",onChange:function(e){return d(e,i)},value:(t=p,Array.isArray(t)?Ee(t):t),onKeyDown:f,onFocus:function(){c(oe(!0)),m(i)},onBlur:function(){return setTimeout((function(){c(oe(!1))}),500)},onClick:function(e){e.target.select&&e.target.select()}})),a.a.createElement(Ze,{index:i,disabled:!S}),y)}rt.defaultProps={currentStops:[],singleStop:""};var at=rt;function ot(e){var t=e.children,n=e.value,r=e.index;return a.a.createElement(D.a,{component:"div",role:"tabpanel",hidden:n!==r,id:Q()(),"aria-labelledby":"simple-tab-".concat(r)},n===r&&t)}var ct=Object(I.a)((function(){return{tabs:{width:"75%"},tab:{minWidth:"33%",width:"33%"},dropDown:{width:"25%",backgroundColor:"white"},select:{height:"100%",textAlign:"center"},selectInput:{backgroundColor:"white","&:focus":{backgroundColor:"white"}},checkbox:{margin:"0px 5px 0px 13px"}}})),it=new AbortController;function ut(e){var t=e.mots,n=e.stationSearchUrl,c=e.APIKey,i=e.isActiveRoute,u=e.onZoomRouteClick,l=e.onPanViaClick,d=e.onDrawNewRoute,p=ct(),f=Object(o.c)(),m=function(e,t){var n=[];return e.filter((function(e){return t.includes(e)})).forEach((function(e){var r=t.find((function(t){return t===e}));r&&n.push({name:r,icon:Se(r)})})),0===n.length&&n.push({name:pe[0],icon:Se(pe[0])}),n},h=m(t,se),g=m(t,de),b=Object(o.d)((function(e){return e.MapReducer.center})),v=Object(o.d)((function(e){return e.MapReducer.tracks})),O=Object(o.d)((function(e){return e.MapReducer.clickLocation})),y=Object(o.d)((function(e){return e.MapReducer.currentStops})),S=Object(o.d)((function(e){return e.MapReducer.showLoadingBar})),E=Object(o.d)((function(e){return e.MapReducer.isRouteInfoOpen})),j=Object(o.d)((function(e){return e.MapReducer.currentStopsGeoJSON})),R=Object(o.d)((function(e){return e.MapReducer.currentMot})),w=a.a.useRef([]);w.current.length!==y.length&&(w.current=Array(y.length).fill().map((function(e,t){return w.current[t]||a.a.createRef()})));var C=Object(r.useState)(h),x=Object(T.a)(C,1)[0],N=Object(r.useState)(g),M=Object(T.a)(N,1)[0],P=Object(r.useState)(null),I=Object(T.a)(P,2),K=I[0],Z=I[1],Y=Object(r.useState)([]),Q=Object(T.a)(Y,2),ee=Q[0],me=Q[1],he=a.a.useState(!0),ge=Object(T.a)(he,2),be=ge[0],ve=ge[1],Oe=Object(r.useState)(0),ye=Object(T.a)(Oe,2),ke=ye[0],Re=ye[1],we=Object(r.useState)(void 0),Ce=Object(T.a)(we,2),xe=Ce[0],Ne=Ce[1];Object(r.useEffect)((function(){E&&f(ie([]))}),[y]);var Me=function(e,t,n){f(te(e)),f(ne(t)),Re(n)},Pe=function(e,t){var n=k.a.clone(j),r={type:"FeatureCollection",features:[{type:"Feature",properties:{id:O.slice().reverse(),type:"coordinates"},geometry:{type:"Point",coordinates:O}}]},a=Object(s.a)(v);a[t-1]="",n[ke]=r,Me(e,n,t),f(le(a)),f(ne(n))};Object(r.useEffect)((function(){if(O)if(""===y[ke]){y[ke]=O,Pe(y,ke+1<y.length?ke+1:ke)}else{var e=y,t=ke;e[ke]=O,Pe(e,ke);var n=k.a.clone(j),r={type:"FeatureCollection",features:[{type:"Feature",properties:{id:O.slice().reverse(),type:"coordinates"},geometry:{type:"Point",coordinates:O}}]};n[ke]=r,Me(e,n,t),f(ne(n))}}),[O]);var Fe=function(e,t,n){var r=Object(s.a)(n).map((function(){return""}));Ne(null),f(le(r)),f(re(t))},Ie=function(e){Re(e),f(oe(!0))},_e=function(e,t){var n=k.a.clone(y),r=k.a.clone(j);(n.splice(t,0,""),r[t])&&Object.keys(r).filter((function(e){return e>=t})).reverse().forEach((function(e){r["".concat(parseInt(e,10)+1)]=r[e]}));var a=Object(s.a)(v);a.splice(t,0,""),f(le(a)),f(te(n)),f(ne(r))},Le=function(e){var t=k.a.clone(y),n=k.a.clone(j);if(t.splice(e,1),n[e]){var r=Object.keys(n);r.forEach((function(t){var r=parseInt(t,10);r===e?delete n[e]:r>e&&(n[r-1]=n[r])})),delete n[r.length-1]}var a=Object(s.a)(v);a.splice(e,1),f(le(a)),f(te(t)),f(ne(n))},Ae=function(e,t){if(Z(t),!e.target.value){var r=y;r[t]="",me([]),f(te(r));var a=Object(s.a)(v);return a[t]="",f(le(a)),void f(ce(!1))}var o=k.a.clone(y);o[t]=e.target.value,f(te(o)),f(ce(!0)),it.abort();var i,u=(it=new AbortController).signal,l="".concat(n,"?q=").concat(e.target.value,"&key=").concat(c).concat(fe.includes(R)?"":"&mots=".concat(be?(i=R,"coach"===i?"bus":i):""),"&ref_location=").concat(Ee(b).reverse().join(","),"&limit=10");fetch(l,{signal:u}).then((function(e){return e.json()})).then((function(e){e.error?f(ae("Couldn't find stations","warning")):(0===e.features.length&&f(ae("Couldn't find stations","warning")),me(e.features),f(ce(!1)))})).catch((function(e){if("AbortError"!==e.name)throw e;console.warn("Abort ".concat(l))}))},He=function(e){var t=Object(T.a)(ee,1)[0];if("Enter"===e.key&&t){var n=y;Me[ke]=t.properties.name;var r=k.a.clone(j);r[ke]=t,f(te(n)),me([]),f(ne(r))}if("Backspace"===e.key){var a=[];e.target.value&&(a=ee);var o={};Object.keys(j).forEach((function(e){e!==ke.toString()&&(o[e]=j[e])})),me(a),f(ne(o))}};return u&&l?a.a.createElement("div",{className:"rd-routing-menu"},a.a.createElement(_.a,{square:!0,elevation:3},a.a.createElement("div",{className:"rd-routing-menu-header"},a.a.createElement(A.a,{value:!!se.includes(R)&&R,className:p.tabs,onChange:function(e,t){Fe(0,t,v)},indicatorColor:"primary",textColor:"primary","aria-label":"mots icons"},x.map((function(e){return a.a.createElement(H.a,{className:p.tab,key:"mot-".concat(e.name),value:e.name,icon:e.icon,"aria-label":e.name})}))),a.a.createElement(z.a,{className:p.dropDown},a.a.createElement(G.a,{renderValue:function(e){return""!==e?e:"Other MOTs"},className:p.select,classes:{root:p.selectInput},labelId:"rd-other-mot-label",value:xe||"",disableUnderline:!xe,displayEmpty:!0,onChange:function(e){if(e){var t=e.target.value;Fe(0,t,v),Ne(t)}else Ne(null)}},M.map((function(e){return a.a.createElement(V.a,{value:e.name,key:"other-mot-".concat(e.name)},e.name)}))))),a.a.createElement(ot,null,a.a.createElement(X.a,{onDragEnd:function(e){if(e.destination){var t=k.a.clone(y),n=t.splice(e.source.index,1),r=Object(T.a)(n,1)[0];t.splice(e.destination.index,0,r);var a=k.a.clone(j),o=Object(F.a)({},a[e.source.index]);if(e.destination.index<e.source.index)Object.keys(a).filter((function(t){return parseInt(t,10)>=e.destination.index&&parseInt(t,10)<e.source.index})).reverse().forEach((function(e){a["".concat(parseInt(e,10)+1)]=a[e]})),a[e.destination.index]=o;else if(e.destination.index>e.source.index){Object.keys(a).filter((function(t){return parseInt(t,10)>=e.source.index&&parseInt(t,10)<=e.destination.index})).forEach((function(t){parseInt(t,10)===e.destination.index?a[e.destination.index]=o:a[t]=a["".concat(parseInt(t,10)+1)]}))}var c=Object(s.a)(v);!function(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}(c,e.source.index,e.destination.index),f(le(c)),f(te(t)),f(ne(a))}}},a.a.createElement(X.c,{droppableId:"droppable"},(function(e){return a.a.createElement("div",Object.assign({className:"stopsContainer"},e.droppableProps,{ref:e.innerRef,style:{background:"white"}}),y.map((function(e,t){return a.a.createElement(X.b,{key:"searchField-".concat(t),draggableId:"searchField-".concat(t),index:t},(function(n,r){return a.a.createElement("div",Object.assign({ref:n.innerRef},n.draggableProps,n.dragHandleProps,{style:(o=r.isDragging,c=n.draggableProps.style,Object(F.a)({userSelect:"none",background:o?"#ededed":"white"},c))}),a.a.createElement(at,{key:"searchField-".concat(t),index:t,inputReference:w.current[t],addNewSearchFieldHandler:_e,currentStops:y,removeSearchFieldHandler:Le,searchStopsHandler:Ae,singleStop:e,processHighlightedResultSelectHandler:He,onFieldFocusHandler:Ie,onPanViaClick:l}));var o,c}))})),e.placeholder)}))),a.a.createElement("div",{className:"rd-mot-checkbox"},a.a.createElement(L.a,{className:p.checkbox,checked:be,onChange:function(){ve(!be),null!==K&&Ae({target:{value:w.current[K].current.value}},K)},color:"primary",inputProps:{"aria-label":"use only mot"}}),a.a.createElement("span",null,"Search only selected mode of transport")),a.a.createElement("div",{className:"rd-route-buttons"},a.a.createElement(W.a,{item:!0,xs:6},a.a.createElement(J.a,{title:"Zoom to the route"},a.a.createElement(B.a,{onClick:function(){return u()},"aria-label":"Zoom to the route",disabled:!i,component:i?void 0:"span",variant:"contained",color:"default",classes:{root:"rd-button-root",disabled:"rd-button-disabled"},startIcon:a.a.createElement(q.a,{fontSize:"small"})},a.a.createElement(D.a,null,"Zoom to the route")))),a.a.createElement(W.a,{item:!0,xs:6},a.a.createElement(J.a,{title:"Route information"},a.a.createElement(B.a,{onClick:function(){d(!0).then((function(){f(ue(!E))}))},"aria-label":"Route information",disabled:!i,component:i?void 0:"span",variant:"contained",color:"default",className:E?"rd-button-active":"",classes:{root:"rd-button-root",disabled:"rd-button-disabled"},startIcon:a.a.createElement($.a,{fontSize:"small"})},a.a.createElement(D.a,null,"Route information")))))),S?a.a.createElement(U.a,null):null),a.a.createElement(Te,{currentSearchResults:ee,processClickedResultHandler:function(e){var t=y;t[ke]=e.properties.name;var n=k.a.clone(j);n[ke]=e,f(te(t));var r=Object(s.a)(v);r[ke]="",f(le(r)),me([]),Object.keys(n).forEach((function(e){e===ke.toString()&&(n[e].geometry.coordinates=je(n[e].geometry.coordinates))})),f(ne(n))}})):null}ot.defaultProps={value:null,index:null},ut.defaultProps={onZoomRouteClick:void 0,onPanViaClick:void 0};var lt=ut,st=n(482),dt=n.n(st),pt=n(483),ft=n.n(pt),mt=n(499),ht=n(96);function gt(){return(gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function bt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var vt=a.a.createElement("path",{strokeWidth:4,fill:"none",stroke:"#ff7f50",d:"M0,16h10.666666666666666             A5.333333333333333,5.333333333333333,0,1,1,21.333333333333332,16             H32M21.333333333333332,16             A5.333333333333333,5.333333333333333,0,1,1,10.666666666666666,16",className:"recharts-legend-icon"}),Ot=function(e){var t=e.svgRef,n=e.title,r=bt(e,["svgRef","title"]);return a.a.createElement("svg",gt({className:"recharts-surface",viewBox:"0 0 32 32",ref:t},r),n?a.a.createElement("title",null,n):null,vt)},yt=a.a.forwardRef((function(e,t){return a.a.createElement(Ot,gt({svgRef:t},e))}));n.p;function St(){return(St=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Et(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var jt=a.a.createElement("path",{strokeWidth:4,fill:"none",stroke:"#3f51b5",d:"M0,16h10.666666666666666             A5.333333333333333,5.333333333333333,0,1,1,21.333333333333332,16             H32M21.333333333333332,16             A5.333333333333333,5.333333333333333,0,1,1,10.666666666666666,16",className:"recharts-legend-icon"}),kt=function(e){var t=e.svgRef,n=e.title,r=Et(e,["svgRef","title"]);return a.a.createElement("svg",St({className:"recharts-surface",viewBox:"0 0 32 32",ref:t},r),n?a.a.createElement("title",null,n):null,jt)},Rt=a.a.forwardRef((function(e,t){return a.a.createElement(kt,St({svgRef:t},e))})),wt=(n.p,n(958),function(e,t){return"".concat(t?Math.round(100*e)/100:Math.round(e/1e3*100)/100)}),Ct=function(e,t,n){for(var r=[],a=n||0;a<e.length;a+=t||1)r.push(e[a]);return r},xt=function(e,t){var n=e/t*300;return n>=80?n:80};function Nt(e){var t,n,c=e.routes,i=e.hoveredCoords,u=e.onHighlightPoint,l=e.clearHighlightPoint,d=Object(o.c)(),p=Object(r.useState)(null),f=Object(T.a)(p,2),m=f[0],h=f[1],g=Object(r.useState)(null),b=Object(T.a)(g,2),v=b[0],O=b[1],y=Object(r.useState)(0),E=Object(T.a)(y,2),j=E[0],k=E[1],C=Object(r.useState)(null),x=Object(T.a)(C,2),N=x[0],M=x[1],P=Object(r.useState)([]),F=Object(T.a)(P,2),I=F[0],_=F[1],L=Object(r.useState)(null),A=Object(T.a)(L,2),H=A[0],V=A[1],G=Object(r.useState)(null),z=Object(T.a)(G,2),D=z[0],U=z[1],B=Object(o.d)((function(e){return e.MapReducer.dialogPosition}));return Object(r.useEffect)((function(){var e,t,n,r=[],a=(e=[]).concat.apply(e,Object(s.a)(c.map((function(e){return e.getGeometry().getFlatCoordinates()})))),o=(t=[]).concat.apply(t,Object(s.a)(c.map((function(e){return e.get("vertex_distances")})))),i=c.map((function(e){return e.get("line_length")})).reduce((function(e,t){return e+t}),0);O(i),V(i>1e3?"km":"m"),U("m"===H);var u=Ct(a,3,0),l=Ct(a,3,1),d=Ct(a,3,2).map((function(e){return Math.round(e)})),p=(n=[]).concat.apply(n,Object(s.a)(c.map((function(e){return e.get("surface_elevations").map((function(e){return Math.round(e)}))}))));k(Math.min.apply(Math,Object(s.a)(p.concat(d)))),M(Math.max.apply(Math,Object(s.a)(p.concat(d)))),d.forEach((function(e,t){r.push({alt:e,surfaceElevation:p.length?p[t]:null,xVal:u[t],yVal:l[t],distance:o[t]})})),_(r)}),[c]),a.a.createElement(mt.a,{isOpen:!0,title:a.a.createElement("span",null,"Route information"),isDraggable:!0,onDragStop:function(e,t){d(function(e){return{type:"SET_DIALOG_POSITION",dialogPosition:e}}({x:t.lastX,y:t.lastY}))},className:"rd-dialog-container",classNameHeader:"rd-dialog-header",classNameCloseBt:"rd-dialog-close-bt",cancelDraggable:".tm-dialog-body",position:B,onClose:function(){return d(ue(!1))}},a.a.createElement("div",{className:"rd-dialog-legend"},a.a.createElement("span",null,a.a.createElement(Rt,null)," surface elevation"),a.a.createElement("span",null,a.a.createElement(yt,null)," interpolated altitude")),a.a.createElement(ht.g,{width:"90%",height:"80%"},a.a.createElement(ht.d,{data:I,onMouseLeave:l},a.a.createElement(ht.j,{type:"number",axisLine:!1,tickLine:!1,domain:[j-10,"dataMax"]},a.a.createElement(ht.b,{value:"m",offset:10,position:"top"})),a.a.createElement(ht.i,{type:"number",dataKey:"distance",tickFormatter:function(e){return wt(e,D)}},a.a.createElement(ht.b,{value:H,offset:10,position:"right"})),a.a.createElement(ht.a,{vertical:!1}),a.a.createElement(ht.c,{type:"monotone",dataKey:"alt",name:"interpolated altitude",dot:!1,stroke:"#ff7f50",strokeWidth:2}),a.a.createElement(ht.c,{type:"monotone",dataKey:"surfaceElevation",name:"surface elevation",dot:!1,stroke:"#3f51b5",strokeWidth:2}),i&&m&&a.a.createElement(ht.f,{x:m.distance,stroke:"lightgrey"}),i&&m&&a.a.createElement(ht.e,{r:4,x:m.distance,y:m.alt,fill:"#3f51b5",stroke:"white"}),a.a.createElement(ht.h,{cursor:!!m||"auto",position:m?{x:xt(m.distance,v),y:(t=m.alt,n=N,t/n>.5?110:20)}:"auto",content:function(e){return i?function(e,t,n){for(var r=new w.a,o=ft()(r.writeFeaturesObject(n,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})).features[0],c=new S.a({geometry:new R.a(e)}),i=r.writeFeatureObject(c,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}),u=dt()(o,i),l=o.geometry.coordinates,s=l.map((function(e){return e[u.properties.index]})),d=s.reduce((function(e,t){var n=u.geometry.coordinates[0];return e?t&&e&&Math.abs(t[0]-n)<Math.abs(e[0]-n)?t:e:t})),p=s.indexOf(d),f=u.properties.index,m=0;m<p;m+=1)f+=l[m].length;var g=t[f];return h(g),g?a.a.createElement("div",{className:"rd-tootip-wrapper"},a.a.createElement("div",null,"surface elevation: ",g.surfaceElevation," m"),a.a.createElement("div",null,"interpolated altitude: ",g.alt," m"),a.a.createElement("div",null,"distance: ",wt(g.distance,D),D?" m":" km")):null}(i,I,c):function(e){if(m&&h(null),e.payload.length){var t=e.payload[0].payload,n=t.xVal,r=t.yVal,o=t.alt,c=t.surfaceElevation,i=t.distance;return u([n,r]),a.a.createElement("div",{className:"rd-tootip-wrapper"},a.a.createElement("div",null,"surface elevation: ",c," m"),a.a.createElement("div",null,"interpolated altitude: ",o," m"),a.a.createElement("div",null,"distance: ",wt(i,D),D?" m":" km"))}}(e)}}))))}Nt.defaultProps={hoveredCoords:null};var Mt=a.a.memo(Nt),Pt=n(209),Ft=n(216),Tt=n(343),It=n(277),_t=function(e){return e.map((function(e){return new Pt.c({stroke:new Ft.a({color:e[0],width:e[1],lineDash:e[2]})})}))},Lt=_t([["darkred",6],["red",3]]),At=_t([["darkred",7],["red",4]]),Ht=_t([["rgb(153,153,0)",6],["yellow",3]]),Vt=_t([["rgb(153,153,0)",7],["yellow",4]]),Gt=_t([["rgb(96, 186, 219)",6],["rgb(173, 216, 230)",3]]),zt=_t([["rgb(96, 186, 219)",7],["rgb(173, 216, 230)",4]]),Dt=_t([["grey",6],["darkgrey",3]]),Ut=_t([["grey",7],["darkgrey",4]]),Bt=_t([["darkblue",6],["blue",3]]),Jt=_t([["darkblue",7],["blue",4]]),Wt=new Pt.c({image:new Tt.a({radius:7,fill:new It.a({color:"red"}),stroke:new Ft.a({color:"darkred",width:2})})}),Kt=new Pt.c({image:new Tt.a({radius:3,fill:new It.a({color:"rgb(173, 216, 230)"}),stroke:new Ft.a({color:"rgb(96, 186, 219)",width:2})})}),qt=new Pt.c({image:new Tt.a({radius:3,fill:new It.a({color:"darkgrey"}),stroke:new Ft.a({color:"grey",width:2})})}),Zt=new Pt.c({image:new Tt.a({radius:7,fill:new It.a({color:"yellow"}),stroke:new Ft.a({color:"rgb(153,153,0)",width:2})})}),$t=new Pt.c({image:new Tt.a({radius:7,fill:new It.a({color:"blue"}),stroke:new Ft.a({color:"darkblue",width:2})})}),Xt=function(e){return"rail"===e?Wt:"bus"===e?Zt:"foot"===e?Kt:"car"===e?qt:$t},Yt=function(e,t){return"rail"===e?t?At:Lt:"bus"===e?t?Vt:Ht:"foot"===e?t?zt:Gt:"car"===e?t?Ut:Dt:t?Jt:Bt},Qt=(n(959),new AbortController),en=function(e){function t(e){var n;Object(d.a)(this,t),(n=Object(f.a)(this,Object(m.a)(t).call(this,e))).onMapMoved=function(e){var t=n.props,r=t.center,a=t.onSetCenter,o=e.map.getView().getCenter();r[0]===o[0]&&r[1]===o[1]||a(o)},n.drawNewRoute=function(e){var t=[],r=n.props,a=r.currentStopsGeoJSON,o=r.routingUrl,c=r.currentMot,i=r.APIKey,u=r.resolveHops,l=r.onShowNotification,s=r.onSetShowLoadingBar,d=r.onSetSelectedRoutes,p=r.tracks,f=r.isRouteInfoOpen;s(!0),Object.keys(a).forEach((function(e,n){a[e].features?t.push("".concat(Ee(a[e].features[0].geometry.coordinates).slice().reverse())):fe.includes(c)?t.push("".concat(a[e].properties.name)):t.push("!".concat(a[e].properties.uid).concat(null!==p[n]?"".concat(p[n]?"$".concat(p[n]):""):""))})),Qt.abort();var m=(Qt=new AbortController).signal,h=!(!f&&!e),g="".concat(o,"?via=").concat(t.join("|"),"&mot=").concat(c,"&resolve-hops=").concat(u,"&key=").concat(i)+"&elevation=".concat(h?1:0)+"&interpolate_elevation=".concat(h)+"&length=true&coord-radius=100.0&coord-punish=1000.0";return fetch(g,{signal:m}).then((function(e){return e.json()})).then((function(e){if(s(!1),e.error)return l("Couldn't find route","error"),void d([]);n.routeVectorSource.clear();var t=new w.a({dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});n.routeVectorSource.addFeatures(t.readFeatures(e)),n.setIsActiveRoute(!!n.routeVectorSource.getFeatures().length),d(n.routeVectorSource.getFeatures()),n.routeVectorLayer.olLayer.setStyle(Yt(c,!1))})).catch((function(e){if("AbortError"!==e.name)throw s(!1),d([]),e;console.warn("Abort ".concat(g))}))};var a=n.props,o=a.APIKey,c=a.onSetClickLocation,i=a.olMap;n.map=i,n.mapRef=Object(r.createRef)(),n.hoveredFeature=null,n.hoveredRoute=null,n.initialRouteDrag=null,n.state={hoveredStationOpen:!1,hoveredStationName:"",isActiveRoute:!1,hoveredPoint:null},n.onHighlightPoint=n.onHighlightPoint.bind(Object(h.a)(n)),n.projection="EPSG:3857";var u=new v.a(b.a.readConfig([{name:"Basemap",visible:!0,isBaseLayer:!0,data:{type:"mapbox",url:"https://maps.geops.io/styles/travic_v2/style.json?key=".concat(o)}}]));n.routeVectorSource=new C.a({features:[]}),u.addLayer(new O.a({key:"routeLayer",name:"routeLayer",olLayer:new E.a({zIndex:1,source:n.routeVectorSource})})),n.highlightVectorSource=new C.a({}),u.addLayer(new O.a({key:"highlightLayer",name:"highlightLayer",olLayer:new E.a({zIndex:1,source:n.highlightVectorSource})})),n.markerVectorSource=new C.a({}),u.addLayer(new O.a({key:"markerLayer",name:"markerLayer",olLayer:new E.a({zIndex:1,source:n.markerVectorSource})})),n.markerVectorLayer=u.getLayer("markerLayer"),n.routeVectorLayer=u.getLayer("routeLayer"),n.layers=Object(s.a)(u.getLayers());var l=new x.a({layers:[n.markerVectorLayer.olLayer],hitTolerance:3});l.on("translateend",(function(e){var t,r=n.props,a=r.tracks,o=r.onSetTracks,c=r.currentStops,i=r.currentStopsGeoJSON,u=r.onSetCurrentStops,l=r.onSetCurrentStopsGeoJSON,s=k.a.clone(a),d=k.a.clone(c),p=k.a.clone(i),f=e.features.getArray()[0].getProperties(),m=f.name,h=f.id;if(m)t=c.indexOf(m);else{t=c.findIndex((function(e){if(!Array.isArray(e))return!1;var t=h.slice().reverse();return e[0]===t[0]&&e[1]===t[1]}))}-1!==t&&(s[t]="",d[t]=e.coordinate,p[t]={type:"FeatureCollection",features:[{type:"Feature",properties:{id:e.coordinate.slice().reverse(),type:"coordinates"},geometry:{type:"Point",coordinates:e.coordinate}}]},o(s),u(d),l(p))}));var p=new N.a({source:n.routeVectorSource,pixelTolerance:4,condition:function(){var e=n.props.currentMot;return!fe.includes(e)},style:function(){var e=n.props.currentMot;return Xt(e)}});return p.on("modifystart",(function(e){n.initialRouteDrag={features:e.features.getArray(),coordinate:e.mapBrowserEvent.coordinate}})),p.on("modifyend",(function(e){var t=n.initialRouteDrag.features,r=n.props,a=r.tracks,o=r.currentMot,c=r.currentStops,i=r.currentStopsGeoJSON,u=r.onSetTracks,l=r.onSetCurrentStops,d=r.onSetCurrentStopsGeoJSON,p=Object(s.a)(a),f=k.a.clone(c),m=k.a.clone(i),h=-1;if(!fe.includes(o)){var g=t.map((function(e){return e.getGeometry()})).map((function(e){return[].concat(Object(s.a)(e.getFirstCoordinate()),Object(s.a)(e.getLastCoordinate()))})),b=n.routeVectorSource.getClosestFeatureToCoordinate(n.initialRouteDrag.coordinate).getGeometry(),v=[].concat(Object(s.a)(b.getFirstCoordinate()),Object(s.a)(b.getLastCoordinate()));g.forEach((function(e,t){e.length===v.length&&e.every((function(e,t){return e===v[t]}))&&(h=t+1)}))}if(h>=0){if(f.splice(h,0,e.mapBrowserEvent.coordinate),p.splice(h,0,""),m[h])Object.keys(m).reverse().forEach((function(t){parseInt(t,10)>=h&&(m["".concat(parseInt(t,10)+1)]=m[t]),parseInt(t,10)===h&&(m[h]={type:"FeatureCollection",features:[{type:"Feature",properties:{id:e.mapBrowserEvent.coordinate.slice().reverse(),type:"coordinates"},geometry:{type:"Point",coordinates:e.mapBrowserEvent.coordinate}}]})}));u(p),l(f),d(m)}n.initialRouteDrag=null})),Object(M.a)().extend([l,p]).getArray().forEach((function(e){n.map.addInteraction(e)})),n.onZoomRouteClick=function(){var e;n.routeVectorSource.getFeatures().length&&(e=n.routeVectorSource.getExtent()),4===e.filter((function(e){return Number.isFinite(e)})).length&&n.map.getView().fit(n.routeVectorSource.getExtent(),{size:n.map.getSize(),duration:500,padding:[50,50,50,50]})},n.onPanViaClick=function(e,t){var r=n.props.currentStopsGeoJSON;if(r&&r[t]){var a=r[t].features?r[t].features[0].geometry.coordinates:r[t].geometry.coordinates;n.map.getView().animate({center:a,duration:500,padding:[100,100,100,100]})}},n.map.on("singleclick",(function(e){var t=n.props,r=t.isFieldFocused;(t.currentStops.includes("")||r)&&c(e.coordinate)})),n.map.on("pointermove",(function(e){var t=n.props.currentMot;n.hoveredFeature&&(n.hoveredFeature=null,n.setState({hoveredStationOpen:!1,hoveredStationName:""})),n.hoveredRoute&&(n.routeVectorLayer.olLayer.setStyle(Yt(t,!1)),n.hoveredRoute=null,n.setState({hoveredPoint:null})),n.map.getFeaturesAtPixel(e.pixel,{hitTolerance:2}).forEach((function(t){if("Point"===t.getGeometry().getType()){n.hoveredFeature=t;var r="",a=t.get("country_code");r=t.get("name")?"".concat(t.get("name")).concat(a?" - ".concat(a):""):"".concat(Ee(t.getGeometry().flatCoordinates)),n.setState({hoveredStationOpen:!0,hoveredStationName:r})}return"LineString"===t.getGeometry().getType()&&(n.hoveredRoute=t,n.setState({hoveredPoint:e.coordinate})),!0}))})),n}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,r=n.currentStopsGeoJSON,a=n.currentMot,o=n.tracks,c=a&&a!==e.currentMot,i=o!==e.tracks,u=r&&r!==e.currentStopsGeoJSON;(c||u||i)&&(this.markerVectorSource.clear(),Object.keys(r).forEach((function(e){t.markerVectorSource.addFeatures((new w.a).readFeatures(r[e])),t.markerVectorSource.getFeatures().forEach((function(e){return e.setStyle(Xt(a))}))})),this.routeVectorSource.clear(),this.setIsActiveRoute(!1),Object.keys(r).length>1&&this.drawNewRoute())}},{key:"onHighlightPoint",value:function(e){var t=this.props.currentMot;this.highlightVectorSource.clear();var n=new S.a({geometry:new R.a(e)});n.setStyle(Xt(t)),this.highlightVectorSource.addFeatures([n])}},{key:"onFeaturesHover",value:function(e){this.mapRef&&(this.mapRef.current.node.current.style.cursor=e.length?"pointer":"inherit")}},{key:"setIsActiveRoute",value:function(e){this.setState({isActiveRoute:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.center,r=t.mots,o=t.APIKey,c=t.selectedRoutes,i=t.isRouteInfoOpen,u=t.stationSearchUrl,l=this.state,s=l.isActiveRoute,d=l.hoveredPoint,p=l.hoveredStationOpen,f=l.hoveredStationName;return a.a.createElement(a.a.Fragment,null,a.a.createElement(lt,{mots:r,stationSearchUrl:u,isActiveRoute:s,onZoomRouteClick:this.onZoomRouteClick,onPanViaClick:this.onPanViaClick,onDrawNewRoute:this.drawNewRoute,APIKey:o}),a.a.createElement(P.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:p,message:f}),a.a.createElement(y.a,{ref:this.mapRef,center:n,layers:this.layers,onMapMoved:function(t){return e.onMapMoved(t)},onFeaturesHover:function(t){return e.onFeaturesHover(t)},zoom:6,tabIndex:null,map:this.map,viewOptions:{projection:this.projection}}),i&&c.length?a.a.createElement(Mt,{routes:c,hoveredCoords:d,onHighlightPoint:this.onHighlightPoint,clearHighlightPoint:function(){e.highlightVectorSource.clear()}}):null)}}]),t}(r.Component);en.getExtentCenter=function(e){return[e[0]+(e[2]-e[0])/2,e[1]+(e[3]-e[1])/2]},en.indexInGeom=function(e,t){return e.indexOf(t[0])===e.indexOf(t[1])-1};en.defaultProps={center:[47.99822,7.84049]};var tn=Object(o.b)((function(e){return{center:e.MapReducer.center,selectedRoutes:e.MapReducer.selectedRoutes,isRouteInfoOpen:e.MapReducer.isRouteInfoOpen,currentMot:e.MapReducer.currentMot,currentStops:e.MapReducer.currentStops,currentStopsGeoJSON:e.MapReducer.currentStopsGeoJSON,isFieldFocused:e.MapReducer.isFieldFocused,resolveHops:e.MapReducer.resolveHops,olMap:e.MapReducer.olMap,tracks:e.MapReducer.tracks}}),(function(e){return{onSetCenter:function(t){return e(ee(t))},onSetTracks:function(t){return e(le(t))},onSetCurrentStops:function(t){return e(te(t))},onSetCurrentStopsGeoJSON:function(t){return e(ne(t))},onSetClickLocation:function(t){return e(function(e){return{type:"SET_CLICK_LOCATION",clickLocation:e}}(t))},onShowNotification:function(t,n){return e(ae(t,n))},onSetShowLoadingBar:function(t){return e(ce(t))},onSetSelectedRoutes:function(t){return e(ie(t))}}}))(en),nn=n(501),rn=n(495),an=n.n(rn),on=(new AbortController).signal,cn=function(e,t,n){if(e.split(",").length>1){var r,a=e.split(",").filter((function(e){return!isNaN(e)})).map((function(e){return parseFloat(e)}));if(2===a.length&&function(e){return!!(isFinite(e[1])&&Math.abs(e[1])<=90&&isFinite(e[0])&&Math.abs(e[0])<=180)}(a)){var o=je(a);r={type:"FeatureCollection",features:[{type:"Feature",properties:{id:o,type:"coordinates"},geometry:{type:"Point",coordinates:o}}]}}return Promise.resolve(r)}var c;return c=/^![a-zA-Z0-9]{16}$/.test(e)?"".concat(n,"lookup/").concat(e.replace("!",""),"/?key=").concat(t):"".concat(n,"?q=").concat(e.replace("!",""),"&key=").concat(t),fetch(c,{signal:on}).then((function(e){return e.json()})).then((function(e){var t=e.features[0];return t.geometry.coordinates=je(e.features[0].geometry.coordinates),t})).catch((function(){return console.error("Failed to fetch geoJson"),null}))};var un=function(e){var t=e.mots,n=e.APIKey,c=e.stationSearchUrl,i=Object(o.c)(),u=an.a.parse(window.location.search),l=Object(o.d)((function(e){return e.MapReducer.center})),s=Object(o.d)((function(e){return e.MapReducer.tracks})),d=Object(o.d)((function(e){return e.MapReducer})),p=Object(o.d)((function(e){return e.MapReducer.currentMot})),f=Object(o.d)((function(e){return e.MapReducer.currentStops})),m=Object(o.d)((function(e){return e.MapReducer.currentStopsGeoJSON})),h=Object(o.d)((function(e){return e.MapReducer.resolveHops})),g=d.olMap,b=Object(r.useState)({}),v=Object(T.a)(b,2),O=v[0],y=v[1];return Object(r.useEffect)((function(){var e={};if(u){if(u.z&&!isNaN(parseFloat(u.z))&&g.getView().setZoom(u.z),u.x&&!isNaN(parseFloat(u.x))&&u.y&&!isNaN(parseFloat(u.y))&&i(ee([parseFloat(u.x),parseFloat(u.y)])),u.mot){var r=t.find((function(e){return e===u.mot}))||t[0];e.mot=r,i(re(r))}if(u.via){e.via=u.via;var a=u.via.split("|"),o=a.map((function(e){return cn(e.split("$")[0],n,c)}));i(le(a.map((function(e){return e.split("$")[1]||""})))),Promise.all(o).then((function(e){i(te(e.map((function(e){return e?"FeatureCollection"===e.type?e.features[0].geometry.coordinates:e.properties.name:""}))));var t={};e.filter((function(e){return!!e})).forEach((function(e,n){return t["".concat(n)]=e})),i(ne(t))}))}u["resolve-hops"]&&i(function(e){return{type:"SET_RESOLVE_HOPS",resolveHops:e}}("true"===u["resolve-hops"]))}y(e)}),[]),Object(r.useEffect)((function(){var e={};e.z=g.getView().getZoom();var t=Object(T.a)(l,1);e.x=t[0];var n=Object(T.a)(l,2);e.y=n[1],e.mot=p,e["resolve-hops"]=h,0!==Object.keys(m).length&&(e.via=function(e,t){return!e||Object.keys(e).length<2?null:Object.keys(e).map((function(n,r){return e[n].features?"".concat(Ee(e[n].features[0].geometry.coordinates)):"!".concat(e[n].properties.uid).concat(t[r]?"$".concat(t[r]):"")})).join("|")}(m,s)),y(e)}),[p,f,m,l,h,g,s]),a.a.createElement(nn.a,{map:g,params:O})},ln=n(1025),sn=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(m.a)(t).call(this,e))).handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){var e=n.props.onShowNotification;n.setState({open:!1}),e(null,"error")},n.state={open:!1},n}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.notificationMessage;t&&t!==e.notificationMessage&&this.handleOpen()}},{key:"render",value:function(){var e=this.props,t=e.notificationMessage,n=e.notificationType,r=this.state.open;return a.a.createElement(P.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:r,autoHideDuration:6e3,onClose:this.handleClose},a.a.createElement(ln.a,{onClose:this.handleClose,severity:n,elevation:6,variant:"filled"},t))}}]),t}(a.a.Component),dn=Object(o.b)((function(e){return{notificationMessage:e.MapReducer.notificationMessage,notificationType:e.MapReducer.notificationType}}),(function(e){return{onShowNotification:function(t,n){return e(ae(t,n))}}}))(sn),pn={mots:pe,routingUrl:"https://api.geops.io/routing/v1/",stationSearchUrl:"https://api.geops.io/stops/v1/"},fn="#515151",mn=Object(u.a)({typography:{body:{fontSize:"1rem"},button:{fontSize:"1rem"},h1:{fontSize:"1.2rem",color:fn},h2:{fontSize:"1rem",color:fn},h3:{fontSize:"1rem",color:fn},h4:{fontSize:"1rem",color:fn},h5:{fontSize:"1rem",color:fn},h6:{fontSize:"1rem",color:fn}}});function hn(e){var t=e.mots,n=e.routingUrl,r=e.stationSearchUrl,o="5cc87b12d7c5370001c1d655012b7edc8da1475084e49b84b6ba658e";return a.a.createElement(l.a,{theme:mn},a.a.createElement(un,{mots:t,APIKey:o,stationSearchUrl:r}),a.a.createElement(tn,{mots:t,routingUrl:n,APIKey:o,stationSearchUrl:r}),a.a.createElement(dn,null))}hn.defaultProps=pn;var gn=hn,bn=n(95),vn=n(496),On={center:[949042.143189,5899715.591163],currentMot:"rail",currentStops:["",""],currentStopsGeoJSON:{},clickLocation:null,notificationMessage:"",notificationType:"info",isFieldFocused:!1,showLoadingBar:!1,selectedRoutes:[],isRouteInfoOpen:!1,dialogPosition:{x:10,y:275},olMap:new(n(214).a)({controls:[]}),resolveHops:!1,tracks:[null,null]},yn=function(e,t){var n={center:t.center};return Object(F.a)({},e,{},n)},Sn=function(e,t){var n={currentStops:t.currentStops};return Object(F.a)({},e,{},n)},En=function(e,t){var n={currentStopsGeoJSON:t.currentStopsGeoJSON};return Object(F.a)({},e,{},n)},jn=function(e,t){var n={currentMot:t.currentMot};return Object(F.a)({},e,{},n)},kn=function(e,t){var n={clickLocation:t.clickLocation};return Object(F.a)({},e,{},n)},Rn=function(e,t){var n={notificationMessage:t.notificationMessage,notificationType:t.notificationType};return Object(F.a)({},e,{},n)},wn=function(e,t){var n={isFieldFocused:t.isFieldFocused};return Object(F.a)({},e,{},n)},Cn=function(e,t){var n={showLoadingBar:t.showLoadingBar};return Object(F.a)({},e,{},n)},xn=function(e,t){var n={selectedRoutes:t.selectedRoutes};return Object(F.a)({},e,{},n)},Nn=function(e,t){var n={isRouteInfoOpen:t.isRouteInfoOpen};return Object(F.a)({},e,{},n)},Mn=function(e,t){var n={dialogPosition:t.dialogPosition};return Object(F.a)({},e,{},n)},Pn=function(e,t){var n={resolveHops:t.resolveHops};return Object(F.a)({},e,{},n)},Fn=function(e,t){var n={tracks:t.tracks};return Object(F.a)({},e,{},n)},Tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:On,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CENTER":return yn(e,t);case"SET_CURRENT_STOPS":return Sn(e,t);case"SET_CURRENT_STOPS_GEOJSON":return En(e,t);case"SET_CURRENT_MOT":return jn(e,t);case"SET_CLICK_LOCATION":return kn(e,t);case"SHOW_NOTIFICATION":return Rn(e,t);case"SET_IS_FIELD_FOCUSED":return wn(e,t);case"SET_SHOW_LOADING_BAR":return Cn(e,t);case"SET_SELECTED_ROUTES":return xn(e,t);case"SET_IS_ROUTE_INFO_OPEN":return Nn(e,t);case"SET_DIALOG_POSITION":return Mn(e,t);case"SET_RESOLVE_HOPS":return Pn(e,t);case"SET_TRACKS":return Fn(e,t);default:return e}},In=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||bn.d,_n=Object(bn.c)({MapReducer:Tn}),Ln=Object(bn.e)(_n,In(Object(bn.a)(vn.a)));n(966),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(o.a,{store:Ln},a.a.createElement(gn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[557,1,2]]]);
//# sourceMappingURL=main.84b37975.chunk.js.map